<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Tirar Pedido - Sorvetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f2f2f7;
        padding: 12px;
        max-width: 480px;
        margin: auto;
        color: #333;
    }

    h1 {
        text-align: center;
        font-size: 28px;
        font-weight: 900;
        margin-bottom: 20px;
    }

    .cat-btn {
        width: 100%;
        background: #007aff;
        color: white;
        padding: 18px;
        font-size: 20px;
        border: none;
        border-radius: 14px;
        margin-top: 15px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 3px 7px rgba(0,0,0,0.15);
    }

    .categoria {
        display: none;
        background: #fff;
        padding: 14px;
        margin-top: 8px;
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .item {
        background: #fff;
        padding: 14px;
        margin: 12px 0;
        border-radius: 14px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .nome {
        font-size: 20px;
        font-weight: bold;
    }

    .valor {
        color: #007aff;
        font-weight: bold;
        margin-top: 2px;
    }

    .controls {
        margin-top: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .btn {
        width: 45px;
        height: 45px;
        border: none;
        border-radius: 12px;
        font-size: 26px;
        font-weight: bold;
        cursor: pointer;
        color: white;
    }

    .menos { background: #ff3b30; }
    .mais  { background: #34c759; }

    .numero {
        width: 45px;
        text-align: center;
        font-size: 24px;
        font-weight: bold;
    }

    #totalArea {
        margin-top: 20px;
        padding: 20px;
        background: #e6fff0;
        border-radius: 16px;
        text-align: center;
        font-size: 22px;
        font-weight: 900;
        color: #0b6b1a;
    }

    #relatorio {
        width: 100%;
        background: #5856d6;
        color: white;
        padding: 18px;
        font-size: 20px;
        margin-top: 25px;
        border: none;
        border-radius: 14px;
        cursor: pointer;
        font-weight: bold;
    }
</style>

<script>
let precoPorCategoria = {
    "PALETAS FRUTIVERÃO": 18,
    "AO LEITE FRUTIVERÃO": 8,
    "TROPICAL FRUTIVERÃO": 6,
    "ESPECIAL FRUTVERÃO": 13,
    "LANÇAMENTOS": null
};

let precosLancamentos = {
    "Pistache": 16,
    "Unicórnio": 10
};

let categorias = {
    "PALETAS FRUTIVERÃO": [
        "Raffaello","Oreo","Ferrero","Kinder Ovo","Kinder Bueno","M&M","Choco Maltine",
        "Milk Trufado","Babalu","Blue Ice","Sensação","Morango","Maracujá","Açaí",
        "Iogurte c/ Amora","Menta c/ Chocolate","Paçoca","Capuccino","Banana com Avelã",
        "Coco c/ Abobora","Coco c/ Doce de Leite","Tapioca","Abacaxi Zero"
    ],
    "AO LEITE FRUTIVERÃO": [
        "Morango","Chocolate","Leite Condensado","Milho-Verde","Açaí c/ Morango",
        "Coco","Coco Queimado","Abóbora c/ Coco","Amendoim","Abacate","Blue Ice"
    ],
    "TROPICAL FRUTIVERÃO": [
        "Uva","Limão","Maracujá","Manga","Abacaxi","Melancia","Tangerina",
        "Maçã Verde","Groselha","Tutti Frutti","Pinta Língua"
    ],
    "ESPECIAL FRUTVERÃO": [
        "Skimo morango","Skimo ao leite","Milk trufado","Brigadeiro","Chococo",
        "Torta de limão","Itu napolitano","Frutblito","Sunday de chocolate","Sundae de Morango"
    ],
    "LANÇAMENTOS": ["Pistache","Unicórnio"]
};

let vendido = {};
let id = 1;

function toggle(cat) {
    let el = document.getElementById("cat_" + cat);
    el.style.display = el.style.display === "block" ? "none" : "block";
}

function add(id) {
    vendido[id] = (vendido[id] || 0) + 1;
    document.getElementById("vend_" + id).innerText = vendido[id];
    calcularTotal();
}

function remove(id) {
    if ((vendido[id] || 0) > 0) vendido[id]--;
    document.getElementById("vend_" + id).innerText = vendido[id];
    calcularTotal();
}

function calcularTotal() {
    let total = 0;
    let i = 1;

    for (let cat in categorias) {
        categorias[cat].forEach(sabor => {

            let preco = precoPorCategoria[cat];
            if (cat === "LANÇAMENTOS") preco = precosLancamentos[sabor];

            total += (vendido[i] || 0) * preco;
            i++;
        });
    }

    document.getElementById("valorTotal").innerText = total.toFixed(2);
}

function gerarRelatorio() {
    let texto = "";
    let i = 1;
    let total = 0;

    for (let cat in categorias) {
        let bloco = "";
        let totalCat = 0;

        categorias[cat].forEach(sabor => {

            let qtd = vendido[i] || 0;
            let preco = precoPorCategoria[cat];
            if (cat === "LANÇAMENTOS") preco = precosLancamentos[sabor];

            totalCat += qtd * preco;

            if (qtd > 0) {
                bloco += `${qtd} - ${sabor}\n`;
            }

            i++;
        });

        if (bloco !== "") {
            texto += `${cat}\n${bloco}\n`;
        }

        total += totalCat;
    }

    texto += `TOTAL: R$ ${total.toFixed(2)}\n`;

    let blob = new Blob([texto], { type: "text/plain" });
    let url = URL.createObjectURL(blob);

    let a = document.createElement("a");
    a.href = url;
    a.download = "pedido.txt";
    a.click();

    URL.revokeObjectURL(url);
}
</script>
</head>

<body>

<h1>Tirar Pedido</h1>

<div id="conteudo">
<script>
for (let cat in categorias) {

    document.write(`<button class="cat-btn" onclick="toggle('${cat}')">${cat}</button>`);
    document.write(`<div id="cat_${cat}" class="categoria">`);

    categorias[cat].forEach(sabor => {

        document.write(`
            <div class="item">
                <div class="nome">${sabor}</div>
                <div class="valor">Preço: R$ ${
                    cat === "LANÇAMENTOS" ? precosLancamentos[sabor] : precoPorCategoria[cat]
                }</div>

                <div class="controls">
                    <button class="btn menos" onclick="remove(${id})">-</button>
                    <span class="numero" id="vend_${id}">0</span>
                    <button class="btn mais" onclick="add(${id})">+</button>
                </div>
            </div>
        `);

        id++;
    });

    document.write("</div>");
}
</script>
</div>

<div id="totalArea">
    TOTAL: R$ <span id="valorTotal">0.00</span>
</div>

<button id="relatorio" onclick="gerarRelatorio()">GERAR PEDIDO</button>

</body>
</html>