<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo da Ótica 👓</title>
<style>
  body {
    background-color: #06101f;
    color: #fff;
    font-family: "Poppins", Arial, sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
  }

  h1 {
    color: #00e5ff;
    margin-top: 15px;
  }

  #gameCanvas {
    background: radial-gradient(circle at top, #02203b, #001428);
    display: block;
    margin: 15px auto;
    border-radius: 10px;
  }

  #info {
    margin-top: 10px;
    font-size: 18px;
  }

  #level, #discount {
    font-weight: bold;
    color: #00e5ff;
  }

  #bonus {
    font-size: 20px;
    margin-top: 15px;
    color: #00ff88;
    font-weight: bold;
  }
</style>
</head>
<body>
  <h1>Jogo da Ótica 👓</h1>
  <canvas id="gameCanvas" width="320" height="480"></canvas>
  <div id="info">
    <p>Pontuação: <span id="score">0</span></p>
    <p>Nível: <span id="level">1</span> | Desconto: <span id="discount">10%</span></p>
  </div>
  <p id="bonus"></p>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let basketX = canvas.width / 2 - 25;
    let items = [];
    let score = 0;
    let level = 1;
    let speedMultiplier = 1;
    let gameActive = true;

    // Controle de toque (mobile)
    document.addEventListener('touchmove', e => {
      const touchX = e.touches[0].clientX - canvas.getBoundingClientRect().left;
      basketX = Math.min(Math.max(touchX - 25, 0), canvas.width - 50);
    });

    // Controle com teclado (PC)
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') basketX -= 20;
      if (e.key === 'ArrowRight') basketX += 20;
      basketX = Math.min(Math.max(basketX, 0), canvas.width - 50);
    });

    // Criar "lentes" que caem
    function newItem() {
      const shapes = ["👓", "🕶️", "🔍", "👁️"];
      const emoji = shapes[Math.floor(Math.random() * shapes.length)];
      items.push({
        x: Math.random() * (canvas.width - 20),
        y: 0,
        speed: (2 + Math.random() * 2) * speedMultiplier,
        emoji: emoji
      });
    }

    function update() {
      if (!gameActive) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Cesta
      ctx.fillStyle = "#00e5ff";
      ctx.fillRect(basketX, canvas.height - 40, 60, 20);

      // Itens (óculos e lentes)
      ctx.font = "24px Arial";
      for (let i = 0; i < items.length; i++) {
        const it = items[i];
        it.y += it.speed;
        ctx.fillText(it.emoji, it.x, it.y);

        // colisão
        if (it.y > canvas.height - 60 && it.x > basketX - 10 && it.x < basketX + 60) {
          score++;
          items.splice(i, 1);
          i--;
          document.getElementById('score').textContent = score;

          // aumenta dificuldade a cada 10 pontos
          if (score % 10 === 0 && level < 10) {
            level++;
            speedMultiplier += 0.3;
            document.getElementById('level').textContent = level;
            document.getElementById('discount').textContent = (level * 10) + "%";
          }

          if (level === 10 && score === 100) {
            document.getElementById('bonus').textContent = "🎉 Parabéns! Ganhou 100% de desconto na armação! 🎉";
            gameActive = false;
          }
        } else if (it.y > canvas.height) {
          items.splice(i, 1);
          i--;
        }
      }

      if (Math.random() < 0.03) newItem();
      requestAnimationFrame(update);
    }

    update();
  </script>
</body>
</html>